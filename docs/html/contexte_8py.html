<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>m2_enedis: script/contexte.py File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">m2_enedis
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_6549bedf82156dc06df95cefb015444e.html">script</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">contexte.py File Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="namespaces" name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:namespacecontexte" id="r_namespacecontexte"><td class="memItemLeft" align="right" valign="top">namespace &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecontexte.html">contexte</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a12798551ddb89a820ae7353d75738e9c" id="r_a12798551ddb89a820ae7353d75738e9c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecontexte.html#a12798551ddb89a820ae7353d75738e9c">contexte.contexte_page</a> ()</td></tr>
<tr class="separator:a12798551ddb89a820ae7353d75738e9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4482f0dc9e6a61d12649e94a1c5b5c0" id="r_af4482f0dc9e6a61d12649e94a1c5b5c0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecontexte.html#af4482f0dc9e6a61d12649e94a1c5b5c0">contexte.call_API</a> (url)</td></tr>
<tr class="memdesc:af4482f0dc9e6a61d12649e94a1c5b5c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fonction pour appeler l'API ADEME et récupérer les données de logements pour un département avant une certaine date.  <br /></td></tr>
<tr class="separator:af4482f0dc9e6a61d12649e94a1c5b5c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae6914715ceb896ecaedeb5f8dd1d725" id="r_aae6914715ceb896ecaedeb5f8dd1d725"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecontexte.html#aae6914715ceb896ecaedeb5f8dd1d725">contexte.rafraichir_donnees</a> (url, <a class="el" href="namespacecontexte.html#abf949e94d6225f2083f7ad6adc8e12ef">oldest_date</a>=&quot;2024-09-01&quot;)</td></tr>
<tr class="memdesc:aae6914715ceb896ecaedeb5f8dd1d725"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fonction pour rafraîchir les données en récupérant les enregistrements de logements à partir du 2 septembre 2024.  <br /></td></tr>
<tr class="separator:aae6914715ceb896ecaedeb5f8dd1d725"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:abbf45e6ed55c7c3bc251922ca1fe064c" id="r_abbf45e6ed55c7c3bc251922ca1fe064c"><td class="memItemLeft" align="right" valign="top">str&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecontexte.html#abbf45e6ed55c7c3bc251922ca1fe064c">contexte.base_url_existant</a> = &quot;https://data.ademe.fr/<a class="el" href="namespacecontexte.html#a2507e90ffdd720adb3ab53f066289b9a">data</a>-fair/api/v1/datasets/dpe-v2-logements-existants/lines&quot;</td></tr>
<tr class="memdesc:abbf45e6ed55c7c3bc251922ca1fe064c"><td class="mdescLeft">&#160;</td><td class="mdescRight">APPEL API #################################.  <br /></td></tr>
<tr class="separator:abbf45e6ed55c7c3bc251922ca1fe064c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3581b50460ebebf4bea9d118d325bebf" id="r_a3581b50460ebebf4bea9d118d325bebf"><td class="memItemLeft" align="right" valign="top">str&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecontexte.html#a3581b50460ebebf4bea9d118d325bebf">contexte.base_url_neuf</a> = &quot;https://data.ademe.fr/<a class="el" href="namespacecontexte.html#a2507e90ffdd720adb3ab53f066289b9a">data</a>-fair/api/v1/datasets/dpe-v2-logements-neufs/lines&quot;</td></tr>
<tr class="separator:a3581b50460ebebf4bea9d118d325bebf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fef8d3f3b0c752fdc2d8dfdcfa5341f" id="r_a9fef8d3f3b0c752fdc2d8dfdcfa5341f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecontexte.html#a9fef8d3f3b0c752fdc2d8dfdcfa5341f">contexte.df_rhone</a> = pd.read_csv(&quot;../data/adresses-69.csv&quot;, <a class="el" href="namespacecontexte.html#a38bc201d341287d304c535de5244828e">sep</a>=&quot;;&quot;)</td></tr>
<tr class="separator:a9fef8d3f3b0c752fdc2d8dfdcfa5341f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1530cdf4bf93ff5667586aeba260659" id="r_ac1530cdf4bf93ff5667586aeba260659"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecontexte.html#ac1530cdf4bf93ff5667586aeba260659">contexte.liste_code_postal_rhone</a> = sorted(<a class="el" href="namespacecontexte.html#a9fef8d3f3b0c752fdc2d8dfdcfa5341f">df_rhone</a>[&quot;code_postal&quot;].unique().tolist())</td></tr>
<tr class="separator:ac1530cdf4bf93ff5667586aeba260659"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeffb6b82f62203dbcc01017ed140f312" id="r_aeffb6b82f62203dbcc01017ed140f312"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecontexte.html#aeffb6b82f62203dbcc01017ed140f312">contexte.df_existants</a> = <a class="el" href="namespacecontexte.html#af4482f0dc9e6a61d12649e94a1c5b5c0">call_API</a>(<a class="el" href="namespacecontexte.html#abbf45e6ed55c7c3bc251922ca1fe064c">base_url_existant</a>)</td></tr>
<tr class="separator:aeffb6b82f62203dbcc01017ed140f312"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5be58e71ba470208206143135130d961" id="r_a5be58e71ba470208206143135130d961"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecontexte.html#a5be58e71ba470208206143135130d961">contexte.df_neufs</a> = <a class="el" href="namespacecontexte.html#af4482f0dc9e6a61d12649e94a1c5b5c0">call_API</a>(<a class="el" href="namespacecontexte.html#a3581b50460ebebf4bea9d118d325bebf">base_url_neuf</a>)</td></tr>
<tr class="separator:a5be58e71ba470208206143135130d961"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0593114ea80651855802f188612166c" id="r_aa0593114ea80651855802f188612166c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecontexte.html#aa0593114ea80651855802f188612166c">contexte.common_columns</a> = list(set(df_existants.columns).intersection(set(df_neufs.columns)))</td></tr>
<tr class="separator:aa0593114ea80651855802f188612166c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6fed22b45a087471859e6d437ea7b5ba" id="r_a6fed22b45a087471859e6d437ea7b5ba"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecontexte.html#a6fed22b45a087471859e6d437ea7b5ba">contexte.df_merged</a> = pd.concat([<a class="el" href="namespacecontexte.html#aeffb6b82f62203dbcc01017ed140f312">df_existants</a>[<a class="el" href="namespacecontexte.html#aa0593114ea80651855802f188612166c">common_columns</a>], <a class="el" href="namespacecontexte.html#a5be58e71ba470208206143135130d961">df_neufs</a>[<a class="el" href="namespacecontexte.html#aa0593114ea80651855802f188612166c">common_columns</a>]], ignore_index=True)</td></tr>
<tr class="separator:a6fed22b45a087471859e6d437ea7b5ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab591bd65fb6903c498c8bdc74a695bc" id="r_aab591bd65fb6903c498c8bdc74a695bc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecontexte.html#aab591bd65fb6903c498c8bdc74a695bc">contexte.index</a></td></tr>
<tr class="separator:aab591bd65fb6903c498c8bdc74a695bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2659a97841eb8347c9b1795f8acd010" id="r_aa2659a97841eb8347c9b1795f8acd010"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecontexte.html#aa2659a97841eb8347c9b1795f8acd010">contexte.False</a></td></tr>
<tr class="separator:aa2659a97841eb8347c9b1795f8acd010"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38bc201d341287d304c535de5244828e" id="r_a38bc201d341287d304c535de5244828e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecontexte.html#a38bc201d341287d304c535de5244828e">contexte.sep</a></td></tr>
<tr class="separator:a38bc201d341287d304c535de5244828e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e1c186ea18c69b208936db4f01ab150" id="r_a2e1c186ea18c69b208936db4f01ab150"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecontexte.html#a2e1c186ea18c69b208936db4f01ab150">contexte.encoding</a></td></tr>
<tr class="separator:a2e1c186ea18c69b208936db4f01ab150"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf949e94d6225f2083f7ad6adc8e12ef" id="r_abf949e94d6225f2083f7ad6adc8e12ef"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecontexte.html#abf949e94d6225f2083f7ad6adc8e12ef">contexte.oldest_date</a> = <a class="el" href="namespacecontexte.html#a6fed22b45a087471859e6d437ea7b5ba">df_merged</a>['Date_réception_DPE'].max()</td></tr>
<tr class="separator:abf949e94d6225f2083f7ad6adc8e12ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa834d29859380881f701e328584cd578" id="r_aa834d29859380881f701e328584cd578"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecontexte.html#aa834d29859380881f701e328584cd578">contexte.df_merged_refresh</a> = pd.concat([<a class="el" href="namespacecontexte.html#aeffb6b82f62203dbcc01017ed140f312">df_existants</a>[<a class="el" href="namespacecontexte.html#aa0593114ea80651855802f188612166c">common_columns</a>], <a class="el" href="namespacecontexte.html#a5be58e71ba470208206143135130d961">df_neufs</a>[<a class="el" href="namespacecontexte.html#aa0593114ea80651855802f188612166c">common_columns</a>]], ignore_index=True)</td></tr>
<tr class="separator:aa834d29859380881f701e328584cd578"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2507e90ffdd720adb3ab53f066289b9a" id="r_a2507e90ffdd720adb3ab53f066289b9a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecontexte.html#a2507e90ffdd720adb3ab53f066289b9a">contexte.data</a></td></tr>
<tr class="separator:a2507e90ffdd720adb3ab53f066289b9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2f44274312366ca5191bf0b62f26949" id="r_ae2f44274312366ca5191bf0b62f26949"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecontexte.html#ae2f44274312366ca5191bf0b62f26949">contexte.file_name</a></td></tr>
<tr class="separator:ae2f44274312366ca5191bf0b62f26949"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
